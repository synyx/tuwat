const t=document.createElement("template");t.innerHTML='\n<style>\n  em {\n    background-color: #fff379;\n    font-style: normal;\n  }\n  button {\n    cursor: pointer;\n  }\n  .tw-bg-transparent{background-color:transparent!important}.tw-bg-white{--tw-bg-opacity:1!important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important}.hover\\:tw-bg-gray-lightest:hover,.tw-bg-gray-lightest{--tw-bg-opacity:1!important;background-color:rgba(217,218,219,var(--tw-bg-opacity))!important}.tw-border-gray-lightest{--tw-border-opacity:1!important;border-color:rgba(217,218,219,var(--tw-border-opacity))!important}.tw-border-solid{border-style:solid!important}.tw-border{border-width:1px!important}.tw-border-r-0{border-right-width:0!important}.tw-border-l-0{border-left-width:0!important}.tw-box-border{box-sizing:border-box!important}.tw-block{display:block!important}.tw-flex{display:flex!important}.tw-hidden{display:none!important}.tw-flex-wrap{flex-wrap:wrap!important}.tw-items-center{align-items:center!important}.tw-flex-grow{flex-grow:1!important}.tw-font-sans{font-family:Open Sans,Helvetica Neue,Helvetica,Arial,sans-serif!important}.tw-text-sm{font-size:.875rem!important;line-height:1.25rem!important}.tw-text-base{font-size:1rem!important;line-height:1.5rem!important}.tw-list-none{list-style-type:none!important}.tw-m-0{margin:0!important}.tw-mr-0{margin-right:0!important}.tw-ml-0{margin-left:0!important}.tw-mb-1{margin-bottom:.25rem!important}.focus\\:tw-outline-none:focus,.tw-outline-none{outline:2px solid transparent!important;outline-offset:2px!important}.tw-p-0{padding:0!important}.tw-py-0{padding-top:0!important;padding-bottom:0!important}.tw-py-1{padding-top:.25rem!important;padding-bottom:.25rem!important}.tw-py-2{padding-top:.5rem!important;padding-bottom:.5rem!important}.tw-px-3{padding-left:.75rem!important}.tw-pr-3,.tw-px-3{padding-right:.75rem!important}.tw-pl-3{padding-left:.75rem!important}.tw-absolute{position:absolute!important}.tw-relative{position:relative!important}*{--tw-shadow:0 0 transparent;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}.tw-text-current{color:currentColor!important}.tw-text-brand-green{--tw-text-opacity:1!important;color:rgba(102,182,48,var(--tw-text-opacity))!important}.tw-text-gray{--tw-text-opacity:1!important;color:rgba(135,136,138,var(--tw-text-opacity))!important}.tw-text-gray-darkest{--tw-text-opacity:1!important;color:rgba(75,75,77,var(--tw-text-opacity))!important}.tw-no-underline{text-decoration:none!important}.tw-w-full{width:100%!important}@keyframes tw-spin{to{transform:rotate(1turn)}}@keyframes tw-ping{75%,to{transform:scale(2);opacity:0}}@keyframes tw-pulse{50%{opacity:.5}}@keyframes tw-bounce{0%,to{transform:translateY(-25%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,.2,1)}}\n</style>\n<form action="/find" type="get" class="tw-text-base tw-font-sans tw-flex tw-flex-wrap">\n    <input name="q" type="search" autocomplete="off" placeholder="Search" autofocus \n      class="tw-flex-grow tw-text-base tw-mr-1 tw-mb-1 tw-px-2 tw-py-1 tw-border tw-border-solid tw-border-gray-lightest focus:tw-outline-none" />\n    <button \n      class="tw-flex tw-items-center tw-text-base tw-mb-1 tw-ml-0 tw-pr-3 tw-py-0 tw-outline-none tw-bg-transparent tw-text-brand-green tw-border tw-border-solid tw-border-gray-lightest tw-border-l-0 active:tw-border-gray"\n      title="Search"\n    >\n      \n<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="20" height="20" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n  <circle cx="10" cy="10" r="7" />\n  <line x1="21" y1="21" x2="15" y2="15" />\n</svg>\n    </button>\n    <div class="tw-w-full tw-relative" id="suggestions"></div>\n</form>\n';class e extends HTMLElement{constructor(){super(),this._shadowRoot=this.attachShadow({mode:"open"}),this._shadowRoot.appendChild(t.content.cloneNode(!0)),this.suggestions=[],this.getAttribute("lang")||(this.lang=document.querySelector("html").lang||"de"),this.getAttribute("find-base-url")||this.setAttribute("find-base-url","/search/")}get findBaseUrl(){return this.getAttribute("find-base-url")}set findBaseUrl(t){this.setAttribute("find-base-url",t)}get buttonText(){return this.getAttribute("button-text")}set buttonText(t){this.setAttribute("button-text",t)}get lang(){return this.getAttribute("lang")}set lang(t){this.setAttribute("lang",t)}connectedCallback(){this.$form=this._shadowRoot.querySelector("form"),this.$input=this._shadowRoot.querySelector("input"),this.$button=this._shadowRoot.querySelector("button"),this.$suggestions=this._shadowRoot.getElementById("suggestions"),this.$form.action=this.findBaseUrl;const t=this.buttonText||"Search";this.$button.title=t,this.$input.placeholder=t,this.$form.addEventListener("submit",this._onFormSubmit.bind(this)),this.$input.addEventListener("focus",this._onFocusInputShowSuggestions.bind(this)),this.$input.addEventListener("keydown",this._onArrowKeyUpAndDownPreventCursorMovementInInput.bind(this)),this.$input.addEventListener("keyup",this._onKeyUpHandleSuggestionSelection.bind(this)),this.$input.addEventListener("input",this._onInputLoadSuggestions.bind(this)),document.addEventListener("click",this._onClickOutsideHideSuggestions.bind(this))}disconnectedCallback(){this.$form.removeEventListener("submit",this._onFormSubmit),this.$suggestions.removeEventListener("mouseover",this._onMouseOverSuggestionMarkItSelected),this.$input.removeEventListener("focus",this._onFocusInputShowSuggestions),this.$input.removeEventListener("keydown",this._onArrowKeyUpAndDownPreventCursorMovementInInput),this.$input.removeEventListener("keyup",this._onKeyUpHandleSuggestionSelection),this.$input.removeEventListener("input",this._onInputLoadSuggestions),document.removeEventListener("click",this._onClickOutsideHideSuggestions)}_onFormSubmit(t){t.preventDefault(),this._openSelectedSuggestion()}_openSelectedSuggestion(){this._currentlySelectedSuggestion()&&(window.location.href=this._currentlySelectedSuggestion().link)}_onMouseOverSuggestionMarkItSelected(t){const e=t.target.closest("li");if(!e)return;const n=Array.from(e.parentNode.children).indexOf(e);this.suggestions.forEach(((t,e)=>t.selected=e===n)),this._renderSuggestions()}_onClickOutsideHideSuggestions(t){this!==t.target&&!this.$form.contains(t.target)&&this.$suggestions.firstChild&&this.$suggestions.firstChild.classList.add("tw-hidden")}_onFocusInputShowSuggestions(){this.$suggestions.firstChild&&this.$suggestions.firstChild.classList.contains("tw-hidden")&&this.$suggestions.firstChild.classList.remove("tw-hidden")}_onArrowKeyUpAndDownPreventCursorMovementInInput(t){switch(t.key){case"ArrowDown":case"ArrowUp":t.preventDefault()}}_onKeyUpHandleSuggestionSelection(t){switch(t.key){case"ArrowDown":t.preventDefault(),this._selectNextSuggestion(),this._renderSuggestions();break;case"ArrowUp":t.preventDefault(),this._selectPreviousSuggestion(),this._renderSuggestions();break;case"Enter":this._currentlySelectedSuggestion()&&(window.location.href=this._currentlySelectedSuggestion().link)}}async _onInputLoadSuggestions(){this.suggestions=await this._loadSuggestions(this.$input.value),this._renderSuggestions()}_currentlySelectedSuggestion(){return this.suggestions.find((t=>t.selected))}_selectNextSuggestion(){const t=this.suggestions.findIndex((t=>t.selected)),e=t<this.suggestions.length-1;-1===t?this.suggestions[0].selected=!0:e&&(this.suggestions[t].selected=!1,this.suggestions[t+1].selected=!0)}_selectPreviousSuggestion(){const t=this.suggestions.findIndex((t=>t.selected));t>0&&(this.suggestions[t].selected=!1,this.suggestions[t-1].selected=!0)}async _loadSuggestions(t){if(!t)return[];try{const e=new URL(this.findBaseUrl,window.location);new FormData(this.$form).forEach(((t,n)=>e.searchParams.append(n,t)));const n=await fetch(e),i=await n.json();return this._mapSuggestions(i,t)}catch(t){return console.error(t),[]}}_mapSuggestions(t){return t.results.map((t=>({title:t.title,link:t.link,highlight:t.contents.filter((t=>"text/vnd.contargo.highlight+html"===t.mimeType&&t.locale===this.lang)).map((t=>t.content)),type:t.contents.filter((t=>"text/vnd.contargo.description"===t.mimeType&&t.locale===this.lang)).map((t=>t.content))})))}_renderSuggestions(){this.suggestions.length?this.$suggestions.innerHTML='<ul class="tw-absolute  tw-box-border tw-w-full tw-border tw-border-gray-lightest tw-border-solid tw-bg-white tw-p-0 tw-m-0 tw-list-none">'+this.suggestions.reduce(((t,e)=>t+`<li class="tw-m-0 tw-p-0">\n          <a href="${e.link}" class="tw-text-base tw-text-current tw-no-underline tw-block tw-py-2 tw-px-3 hover:tw-bg-gray-lightest ${e.selected&&"tw-bg-gray-lightest"}">\n            <span>${e.title}</span> <span class="tw-text-gray tw-text-sm">${e.type}</span>\n            ${e.highlight?`<span class="tw-text-sm tw-block tw-text-gray-darkest">${e.highlight}</span>`:""}\n          </a>\n        </li>`),"")+"</ul>":this.$suggestions.innerHTML=""}}window.customElements.define("ctgo-find",e);
