var e=require("@hotwired/turbo"),t=require("reconnecting-websocket");!function e(){let t=document.getElementById("toggle-filtered-alerts"),o=document.getElementById("filtered-table");t.addEventListener("click",()=>{o.classList.toggle("hidden");let e=!o.classList.contains("hidden");t.innerText=e?"Hide":"Show",localStorage.setItem("filteredAreShown",e.toString()),e&&o.scrollIntoView()}),document.addEventListener("turbo:before-stream-render",function(t){let o=t.detail.render;t.detail.render=function(t){o(t),e()}}),"true"===localStorage.getItem("filteredAreShown")&&(o.classList.remove("hidden"),t.innerText="Show")}();let o=new URLSearchParams(window.location.search).get("eventSource");null==o&&(window.WebSocket?o="websocket":window.EventSource&&(o="sse"));let n=new class{constructor(){this.active=!0}connect(){let e=this;this.timerId=setTimeout(function t(){if(e.active){let o=Date.parse(document.querySelector("#last_refresh").dateTime);Date.now()-o>9e4?(console.log("Force reloading, last refresh too old: "+(Date.now()-o)),location.reload()):Date.now()-o>7e4&&(console.log("Reloading, last refresh too old: "+(Date.now()-o)),location.reload()),e.timerId=setTimeout(t,1e4)}},1e4)}disconnect(){this.active=!1,clearTimeout(this.timerId)}reconnect(){this.active=!0,this.connect()}},c=null;switch(o){case"websocket":{let o="https:"===window.location.protocol?"wss://":"ws://",n=window.location.pathname,s=o+window.location.host+"/ws"+n;c=new class{constructor(e){this.socketUrl=e}connect(){let o=new(t&&t.__esModule?t.default:t)(this.socketUrl);o.addEventListener("error",function(e){console.error("Socket encountered error: ",e.message,"Closing socket")}),o.addEventListener("open",function(){console.log("Socket is connected.  Enabling turbo."),e.connectStreamSource(o)}),this.socket=o}disconnect(){this.socket&&(e.disconnectStreamSource(this.socket),this.socket.close(3001,"Human disconnect"),this.socket=null)}reconnect(){this.socket||this.connect()}}(s);break}case"sse":{let t=window.location.protocol,o=window.location.pathname,n=t+"//"+window.location.host+"/sse"+o;c=new class{constructor(e){this.socketUrl=e}connect(){this.socket=new EventSource(this.socketUrl)}disconnect(){this.active=!1,this.socket&&(e.disconnectStreamSource(this.socket),this.socket.close(),this.socket=null)}reconnect(){this.socket||this.connect()}}(n);break}default:c=n}n.connect(),c.connect(),document.addEventListener("DOMContentLoaded",function(){console.log("Adding handler for manual disconnect.");let e=document.getElementById("connection-state");e.addEventListener("change",function(){this.checked?(console.log("Manually connecting stream."),c.reconnect(),n.reconnect()):(console.log("Manually disconnecting stream."),c.disconnect(),n.disconnect())})});//# sourceMappingURL=index.min.js.map

//# sourceMappingURL=index.min.js.map
